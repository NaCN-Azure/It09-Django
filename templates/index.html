
<!DOCTYPE html>

{% extends "base.html" %}
{% load static %}
{% block title_block %}Home{% endblock %}
<html lang="en">


<body>
    
    {% block body_block %}
    <div class="container-wrapper">
        <style>
            .job {
                width:1000px;
                display:flex;
                justify-content: space-between;
                border: 1px solid #dcdcdc;
                margin-block: 10px 10px;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 0 5px rgb(166, 166, 166);
                word-wrap: break-word;  
                overflow: hidden;      
                text-overflow: ellipsis; 
                background-color: rgba(255, 255, 255, 0.5); 
                backdrop-filter: blur(10px);
                align-items:stretch;
            }

            .job-image{
                flex:50%;
                display:flex;
                height:300px;
                justify-content:center;
                align-items:center;
                max-width:50%;
                overflow:hidden;
            }
            .job-image img{
                max-width:100%;
                max-height:100%;
                height:auto;
                object-fit:contain;
            }
        </style>

        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="sorted-bar">

                    <div class="dropdown" data-filter-type="filter" data-category="location">
                        <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenuButton1"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Location
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                            <li><a class="dropdown-item" href="#" data-filter="Glasgow">Glasgow</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Edinburgh">Edinburgh</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Stirling">Stirling</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Aberdeen">Aberdeen</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="All">All</a></li>
                        </ul>
                    </div>

                    <div class="dropdown" data-filter-type="filter" data-category="industry">
                        <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenuButton2"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Industry
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                            <li><a class="dropdown-item" href="#" data-filter="Retail">Retail</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Construction, Repair and Maintenance Services">Construction, Repair and
                                    Maintenance Services</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Personal Customer Services">Personal Customer Services</a>
                            </li>
                            <li><a class="dropdown-item" href="#" data-filter="Restaurants & Food Services">Restaurants & Food
                                    Services</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Hotel & Travel Accommodation">Hotel & Travel
                                    Accommodation</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Others">Others</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="All">All</a></li>
                        </ul>
                    </div>

                    <div class="dropdown" data-filter-type="filter" data-category="jobtype">
                        <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenuButton3"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Job Type
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton3">
                            <li><a class="dropdown-item" href="#" data-filter="Part-Time">Part-Time</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Temporary">Temporary</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Volunteer">Volunteer</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="All">All</a></li>
                    </div>

                    <div class="dropdown" data-filter-type="filter" data-category="education">
                        <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenuButton4"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Education Level
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton4">
                            <li><a class="dropdown-item" href="#" data-filter="Foundation Degree">Foundation Degree</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="GCSE">GCSE</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Certificate of Higher Education">Certificate of Higher
                                    Education</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Bachelor's Degree">Bachelor's Degree</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="All">All</a></li>
                        </ul>
                    </div>

                    <div class="dropdown" data-filter-type="filter" data-category="remote">
                        <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenuButton5"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Remote
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton5">
                            <li><a class="dropdown-item" href="#" data-filter="In-Person">In-Person</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Hybrid">Hybrid</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="Remote">Remote</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="All">All</a></li>
                        </ul>
                    </div>

                    <div class="dropdown" data-filter-type="sort" data-category="salary">
                        <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenuButton6"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Sorted by Salary
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton6">
                            <li><a class="dropdown-item" href="#" data-filter="desc">From highest to lowest</a>
                            </li>
                            <li><a class="dropdown-item" href="#" data-filter="asc">From lowest to highest</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="job-listing">


                
<!--                {% for job in jobs %}-->
<!--                <div class="col-10 job" data-location="{{ job.city }}" data-industry="{{ job.get_industry_display }}" data-jobtype="{{ job.get_type_display }}" data-education="{{ job.get_requirement_display }}" data-remote="{{ job.get_remote_display }}" data-salary="{{ job.salary }}">-->
<!--                    <a href="{% url 'job_detail' job_id=job.id %}" class="job-link">    -->

<!--                        <div>-->
<!--                            <h3>{{ job.title }}</h3>-->
<!--                            <p>{{ job.employer }}</p>-->
<!--                            <div class="job-details">-->
<!--                                <p><b>Salary:</b> £{{ job.salary }} per hour</p>-->
<!--                                <p><b>Remote: </b>{{ job.get_remote_display }}</p>-->
<!--                                <p><b>Job Type: </b>{{ job.get_type_display }}</p>-->
<!--                                <p><b>Location: </b>{{ job.city }}</p>-->
<!--                            </div>-->
<!--                            <p><b>Education Level Requirement:</b> {{ job.get_requirement_display }}</p>-->
<!--                            <p><b>Duration:</b> {{ job.start_date|date:"d M Y"}} - {{ job.end_date|date:"d M Y" }}</p>-->
<!--                            <p><b>Other Information: </b> {{job.other}}</p>-->
<!--                        </div>-->
<!--                    </a>-->
<!--                    <div class="job-image">-->
<!--                        {% if job.avatar %}-->
<!--                            <img src="{{ job.avatar }}" alt="{{ job.title }}" style="width: 100px; height: 100px;">-->
<!--                        {% else %}-->
<!--                            <img src="{% static 'image/default-job.jpg' %}" alt="Default Job Image" style="width: 100px; height: 100px;">-->
<!--                        {% endif %}-->
<!--                    </div>-->
<!--         job d-flex justify-content-between align-items-end mb-4       </div>-->
<!--                {% endfor %}-->
{% for job in jobs %}
<div class="col-10 job" data-location="{{ job.city }}" data-industry="{{ job.get_industry_display }}" data-jobtype="{{ job.get_type_display }}" data-education="{{ job.get_requirement_display }}" data-remote="{{ job.get_remote_display }}" data-salary="{{ job.salary }}">
    <a href="{% url 'job_detail' job_id=job.id %}" class="job-link flex-grow-1">
        <div>
            <h3>{{ job.title }}</h3>
            <p>{{ job.employer }}</p>
            <div class="job-detail">
                <p><b>Salary:</b> £{{ job.salary }} per hour</p>
                <p><b>Remote:</b> {{ job.get_remote_display }}</p>
                <p><b>Job Type:</b> {{ job.get_type_display }}</p>
                <p><b>Location:</b> {{ job.city }}</p>
                <p><b>Education Level Requirement:</b> {{ job.get_requirement_display }}</p>
                <p><b>Duration:</b> {{ job.start_date|date:"d M Y"}} - {{ job.end_date|date:"d M Y" }}</p>
                <p><b>Other Information:</b> {{ job.other }}</p>
            </div>
        </div>
    </a>
    <div class="job-image">
        {% if job.avatar %}
            <img src="{{ job.avatar }}" alt="{{ job.title }}">
        {% else %}
            <img src="{% static 'image/default-job.jpg' %}" alt="Default Job Image">
        {% endif %}
    </div>
</div>
{% endfor %}


            
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const jobs = document.querySelectorAll('.job');
        const filters = {};
    
        function filterJobs() {
            jobs.forEach(job => {
                let shouldShow = true;

                for (const category in filters) {
                    const option = filters[category];
                    const jobOption = job.dataset[category];

                    if (option !== 'All' && jobOption !== option) {
                        shouldShow = false;
                        break;
                    }
                }

                job.style.display = shouldShow ? 'block' : 'none';
            });
        }
    
        function sortJobsBySalary(order) {
            const sortedJobs = Array.from(jobs).sort((a, b) => {
                const salaryA = parseFloat(a.dataset.salary);
                const salaryB = parseFloat(b.dataset.salary);
                return order === 'asc' ? salaryA - salaryB : salaryB - salaryA;
            });
    
            jobs.forEach(job => job.remove());
    
            sortedJobs.forEach(job => {
                document.querySelector('.job-listing').appendChild(job);
            });
        }
    
        document.addEventListener('click', function (event) {
            const target = event.target;

            if (target.classList.contains('dropdown-item')) {
                const filterType = target.closest('.dropdown').dataset.filterType;
                const filterOption = target.dataset.filter;
                const category = target.closest('.dropdown').dataset.category;

                if (filterType === 'filter') {
                    console.log(filterType);
                    console.log(category);
                    console.log(filters);
                    // Update the filters object for the selected category
                    if (filterOption === 'All') {
                        delete filters[category];
                    } else {
                        filters[category] = filterOption;
                    }
                    console.log(filters);
                    // Filter jobs based on all selected filters
                    filterJobs();
                } else if (filterType === 'sort') {
                    sortJobsBySalary(filterOption);
                }
            }
        });
    });
    </script>

<<<<<<< HEAD
=======
    
<!--    <script>-->
<!--        $(document).ready(function () {-->
<!--            $.ajax({-->
<!--                url: "{% url 'index' %}",-->
<!--                method: "GET",-->
<!--                dataType: "json",-->
<!--                success: function (response) {-->
<!--                    $(".job-listing .row").html(response);-->
<!--                },-->
<!--                error: function (error) {-->
<!--                    console.error("Error fetching jobs:", error);-->
<!--                }-->
<!--            });-->
<!--        });-->
<!--    </script>-->

>>>>>>> 7f5e073cb90f2c5b55cf6ce804eaf1659c47d96f
    {% endblock %}

</body>

</html>